<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cabine de Fotos ‚Ä¢ Terceir√£o</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #6a0dad, #ff69b4);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    color: white;
  }
  #startScreen, #cameraScreen {
    position: absolute;
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
  }
  button {
    padding: 20px 40px;
    font-size: 24px;
    border: none;
    border-radius: 25px;
    cursor: pointer;
    background: #ffffff;
    color: #6a0dad;
    font-weight: bold;
  }
  video {
    width: 90%;
    max-width: 700px;
    border-radius: 20px;
    border: 4px solid white;
  }
</style>
</head>
<body>

<!-- Tela de in√≠cio -->
<div id="startScreen">
  <h1>üì∏ Cabine de Fotos ‚Ä¢ Terceir√£o</h1>
  <button id="startBtn">Iniciar</button>
</div>

<!-- Tela da c√¢mera -->
<div id="cameraScreen" style="display:none;">
  <video id="camera" autoplay playsinline></video>
  <canvas id="snapshot" style="display:none;"></canvas>
  <button id="btn">Tirar foto</button>
</div>

<script>
const startScreen = document.getElementById("startScreen");
const cameraScreen = document.getElementById("cameraScreen");
const startBtn = document.getElementById("startBtn");

const video = document.getElementById("camera");
const canvas = document.getElementById("snapshot");
const btn = document.getElementById("btn");

// Imagens fixas
const turmaImg = new Image();
turmaImg.src = "https://i.imgur.com/WxG5cXK.png"; // Foto da turma provis√≥ria
const logoImg = new Image();
logoImg.src = "https://i.imgur.com/zvWTUVu.png"; // Logo provis√≥rio

let fotos = [];

// Iniciar c√¢mera
startBtn.addEventListener("click", () => {
  startScreen.style.display = "none";
  cameraScreen.style.display = "flex";

  navigator.mediaDevices.getUserMedia({ video: true })
    .then(stream => {
      video.srcObject = stream;
    })
    .catch(err => {
      alert("Erro ao acessar a c√¢mera üò¢\nUse Chrome ou Edge e permita a c√¢mera.");
      console.log(err);
    });
});

// Tirar foto
btn.addEventListener("click", () => {
  if(video.videoWidth === 0 || video.videoHeight === 0){
    alert("A c√¢mera ainda n√£o est√° pronta. Espere 1-2 segundos e tente de novo.");
    return;
  }

  canvas.width = video.videoWidth;
  canvas.height = video.videoHeight;
  const ctx = canvas.getContext("2d");
  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

  // Adiciona logo e foto da turma
  ctx.drawImage(turmaImg, canvas.width/4, canvas.height - 120, canvas.width/2, 100);
  ctx.drawImage(logoImg, canvas.width - 120, canvas.height - 120, 100, 100);

  fotos.push(canvas.toDataURL("image/png"));

  if(fotos.length === 4){
    const finalCanvas = document.createElement("canvas");
    finalCanvas.width = canvas.width;
    finalCanvas.height = canvas.height * 4;
    const finalCtx = finalCanvas.getContext("2d");

    fotos.forEach((f, i) => {
      const img = new Image();
      img.src = f;
      img.onload = () => {
        finalCtx.drawImage(img, 0, canvas.height * i, canvas.width, canvas.height);

        if(i === fotos.length - 1){
          const link = document.createElement("a");
          link.href = finalCanvas.toDataURL("image/png");
          link.download = "cabine_4fotos.png";
          link.click();

          fotos = []; // reseta array

          // Volta para tela de in√≠cio
          cameraScreen.style.display = "none";
          startScreen.style.display = "flex";
        }
      }
    });
  }
});
</script>

</body>
</html>



